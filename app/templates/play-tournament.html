{% extends 'base.html' %}
{% block content %}
{% set tournament = model['tournament'] %}
<h1>Tournament {{tournament.description}}</h1>
<div style="float:left;margin:5px">
  {% for c_match in model['completed'] %}
    <p>{{c_match.player1.fname}}: {{c_match.score1}}</p>
    <p>{{c_match.player2.fname}}: {{c_match.score2}}</p>
    <a href="{{url_for('undo_match', 
	     tourn_id = tournament.id, 
	     match_id = c_match.id)}}">Undo!</a>
  <hr/>
  {% endfor %}
  {% for s_match in model['schedule'] %}
    <form action="{{tournament.id}}" method="post" name="match">
      <p>
	{{ form.csrf_token }}
	{{form.id(value=s_match.id)}}
	{{form.player1_id(value=s_match.player1.id)}}
	{{form.player2_id(value=s_match.player2.id)}}
	{{s_match.player1.fname}}: {{form.score1(size=4,value='')}}<br/>
	{{s_match.player2.fname}}: {{form.score2(size=4,value='')}}<br/>
      </p>
      <p><button type="submit" class="btn btn-primary">Add Match</button></p>
    </form>
    <hr/>
  {% endfor %}
</div>
<div style="float:left;margin:5px">
  <table class="table table-bordered">
    <thead>
      <tr>
	<th>Team</th><th>W</th><th>L</th><th>T</th><th>%</th>
	<th>PF</th><th>PA</th><th>+/-</th>
      </tr>
    </thead>
    <tbody>
    {% for standing_row in model['standings'] %}
      <tr>
	<td>{{standing_row.name}}</td>
	<td>{{standing_row.win}}</td>
	<td>{{standing_row.loss}}</td>
	<td>{{standing_row.tie}}</td>
	<td>{{standing_row.percent_display}}</td> 
	<td>{{standing_row.pf}}</td>
	<td>{{standing_row.pa}}</td>
	<td>{{standing_row.pf - standing_row.pa}}</td> 
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
