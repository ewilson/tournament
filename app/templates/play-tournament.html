{% extends 'base.html' %}
{% block content %}

{% set tournament = model['tournament'] %}

<div class="container">
  <h1>{{tournament.description}}</h1>
  <div class="row">
    <div class="col-md-4">
      <h2>Scheduled Matches</h2>
      {% for s_match in model['schedule'] %}
        <div class="well">
	  <form action="{{tournament.id}}" method="post" name="match" role="form" class="form-horizontal">
	    {{ form.csrf_token }}
	    {{form.id(value=s_match.id)}}
	    {{form.player1_id(value=s_match.player1.id)}}
	    {{form.player2_id(value=s_match.player2.id)}}
	    <div class="form-group">
	      <label for="score1" class="col-sm-3 control-label">
		{{s_match.player1.fname}}
	      </label>
	      <div class="col-sm-9">
		{{ form.score1(size=4,value='',class="form-control",
		placeholder="Enter Score") }}
	      </div>
	    </div>
	    <div class="form-group">
	      <label for="score2" class="col-sm-3 control-label">
		{{s_match.player2.fname}}
	      </label>
	      <div class="col-sm-9">
		{{ form.score2(size=4,value='',class="form-control",
		placeholder="Enter Score") }}
	      </div>
	    </div>
	    <div class="form-group">
	      <div class="col-sm-offset-3 col-sm-9">
	      <button type="submit" class="btn btn-primary">
		Add Match
	      </button>
	      </div>
	    </div>
	  </form>
	</div>
      {% endfor %}
    </div>
    <div class="col-md-4">
      <h2>Completed Matches</h2>
      {% for c_match in model['completed'] %}
	<div class="well">
          <table class="table">
	    <tr><td>{{c_match.player1.fname}}</td><td>{{c_match.score1}}</td></tr>
            <tr><td>{{c_match.player2.fname}}</td><td>{{c_match.score2}}</td></tr>
          </table>
	  <a href="{{url_for('undo_match',
		   tourn_id = tournament.id,
		   match_id = c_match.id)}}"><span class="glyphicon glyphicon-remove"></span></a>
	</div>
      {% endfor %}
    </div>
    <div class="col-md-4">
      <h2>Standings</h2>
      <table class="table table-bordered table-hover">
	<thead>
	  <tr>
	    <th>Team</th><th>W</th><th>L</th><th>T</th><th>%</th>
	    <th>PF</th><th>PA</th><th>+/-</th>
	  </tr>
	</thead>
	<tbody>
	{% for standing_row in model['standings'] %}
	  <tr>
	    <td>{{standing_row.name}}</td>
	    <td>{{standing_row.win}}</td>
	    <td>{{standing_row.loss}}</td>
	    <td>{{standing_row.tie}}</td>
	    <td>{{standing_row.percent_display}}</td> 
	    <td>{{standing_row.pf}}</td>
	    <td>{{standing_row.pa}}</td>
	    <td>{{standing_row.pf - standing_row.pa}}</td> 
	  </tr>
	{% endfor %}
	</tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
